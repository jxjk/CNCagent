FANUC Series Oi-MD/Mate-MD 数控系统编程与操作核心知识点
基于《B-64304CM-2/03 加工中心系统操作说明书》整理
适用于FANUC Series 0i-MD / 0i Mate-MD 纳米CNC系统
最后更新：2023年

1. 安全规范
1.1 警告等级定义
等级	含义	后果
警告	可能导致人员死亡或重伤	必须严格遵守
注意	可能导致人员受伤或设备损坏	需要谨慎操作
注释	补充说明信息	辅助理解
1.2 通用安全要点
试运行确认：新程序必须通过单段、倍率、机械锁住等方式试运行

数据校验：运行前确认坐标、补偿量、参数等输入数据正确

参数保护：制造商预设参数非必要不修改，必须修改时需完全理解其功能

备份机制：程序、参数、偏置量必须定期备份到外部介质

1.3 操作安全要点
操作类型	安全要求
手动运行	确认当前位置、移动轴、方向、速度
返回参考点	电源接通后必须执行（需要手动返回的机型）
手动进给	大倍率手轮操作需谨慎，防止刀具快速移动
原点/预置	程序执行中禁止操作
工作坐标系偏移	手动干预/锁住后需重新确认坐标系
软操作面板	注意MDI按键操作，防止误触发
2. G代码功能分类
2.1 模态与非模态G代码
类型	特点	示例
模态G代码	持续有效直到同组其他代码替换	G00/G01/G02/G03
单步G代码	仅在指定程序段有效	G04/G28/G30
2.2 G代码分组速查
组别	主要G代码	功能说明
01	G00/G01/G02/G03	定位/直线/圆弧插补
00	G04/G27/G28/G29/G30/G31	暂停/参考点相关/跳过功能
17	G15/G16	极坐标取消/启用
02	G17/G18/G19	平面选择（XY/ZX/YZ）
07	G40/G41/G42	刀具径补偿取消/左/右
08	G43/G44/G49	刀具长度补偿+/−/取消
16	G68.2/G69	倾斜面分度指令/取消
09	G73~G89	钻孔用固定循环
03	G90/G91	绝对/增量指令
3. 补偿功能
3.1 刀具长度补偿（G43/G44/G49）
nc
G43 Z_H_    ; 正向长度补偿（H为偏置号）
G44 Z_H_    ; 负向长度补偿
G49        ; 取消长度补偿
作用：补偿不同刀具的长度差异

应用时机：换刀后使用，无需修改程序

注意事项：

在向R点定位后应用补偿

G53/G28/G30指令时取消补偿

3.2 刀具径补偿（G40/G41/G42）
nc
G41 D_     ; 左补偿（沿前进方向左侧）
G42 D_     ; 右补偿（沿前进方向右侧）
G40        ; 取消补偿
作用：使刀具沿轮廓偏移刀具半径的路径移动

起刀条件：必须在G00/G01移动中建立/取消

干涉检测：系统可检测并报警防止过切

3.3 特殊补偿情况
场景	处理方式
机械坐标系指令（G53）	临时取消补偿
返回参考点指令	临时取消补偿
MDI方式下的补偿	不执行刀具径补偿/刀尖半径补偿
4. 钻孔用固定循环
4.1 循环动作分解
text
动作1：X/Y轴定位
动作2：快速移动到R点平面
动作3：钻孔（切削进给到Z点）
动作4：孔底动作（暂停/主轴定向等）
动作5：退刀到R点平面
动作6：快速移动到初始平面
4.2 常用固定循环
G代码	名称	特点	适用场景
G73	高速深孔钻	间歇进给，排屑良好	深孔加工
G74	反向攻丝	主轴反转进给，正转退出	左旋螺纹
G76	精镗	主轴定向，刀尖反向偏移	高精度镗孔
G81	钻孔循环	切削进给到底，快速退出	普通钻孔
G82	锪孔循环	孔底暂停，提高深度精度	阶梯孔
G83	深孔钻	间歇进带排屑，每次退至R点	深孔排屑困难
G84	攻丝循环	主轴正转进给，反转退出	右旋螺纹
G85	镗孔循环	切削进给进退	粗镗
G86	镗孔循环	主轴停止后快速退出	一般镗孔
G87	反镗循环	主轴定向，反向偏移	反镗孔
G88	镗孔循环	孔底暂停可手动操作	特殊镗孔
G89	镗孔循环	孔底暂停，切削进给退出	精镗
4.3 固定循环参数
地址	含义	说明
X_Y_	孔位置坐标	定位平面内坐标
Z_	孔底位置	从R点到孔底的距离
R_	R点平面位置	从初始平面到R点的距离
Q_	每次切削量	G73/G83中为切削深度
P_	暂停时间	单位：毫秒
F_	切削进给速度	单位：mm/min或inch/min
K_	重复次数	最大9999
4.4 重要注意事项
模态特性：循环参数在G80取消前保持有效

平面选择：由G17/G18/G19决定定位平面和钻孔轴

返回平面：

G98：返回初始平面

G99：返回R点平面

取消方式：

G80：直接取消

01组G代码（G00~G03）：间接取消

轴切换：必须先取消循环再切换钻孔轴

5. 刚性攻丝
5.1 启用方式（三选一）
nc
M29 S1000        ; 方式1：攻丝前指定
G84 X_Y_Z_R_F_   ; 方式2：与攻丝指令同段
（参数设定G84为刚性攻丝） ; 方式3：参数设置
5.2 深孔刚性攻丝
nc
G84 Z_R_Q_F_     ; Q为每次切削量
高速深孔攻丝：参数PCP=0，仅退刀少量距离

深孔攻丝：参数PCP=1，每次退回R点

5.3 倍率控制
倍率类型	控制方式	说明
拉拔倍率	参数DOV=1	退刀时有效，倍率值设于参数5211
程序指定倍率	J地址指定	J为退刀时主轴转速，需与S配合计算
倍率信号	外部信号	通过PMC控制切削/退刀倍率
5.4 限制条件
S指令限制：不得超过齿轮最大转速

主轴分配量：串行主轴最大32767脉冲/8ms

F指令单位：

G94：1mm/min或0.01inch/min

G95：0.01mm/rev或0.0001inch/rev

M29位置：必须在攻丝指令前或同段

6. 倾斜面分度指令（五轴功能）
6.1 基本指令格式
nc
G68.2 X_Y_Z_I_J_K_   ; 设定特性坐标系
G53.1               ; 刀具轴方向控制（自动垂直于加工面）
...                 ; 在特性坐标系中编程
G69                 ; 取消倾斜面分度
6.2 参数说明
地址	含义	说明
X_Y_Z_	特性坐标系原点	在工作坐标系中的位置
I_J_K_	欧拉角	绕Z、X'、Z''轴旋转的角度
G53.1	刀具轴控制	自动控制刀具垂直于加工面
6.3 机床类型支持
刀具旋转型：两个旋转轴控制刀具方向

工作台旋转型：两个旋转轴控制工作台

混合型：一个旋转轴控制刀具，一个控制工作台

6.4 坐标变换原理
text
工作坐标系 → 绕Z转I角 → 绕X'转J角 → 绕Z''转K角 → 平移(X,Y,Z) → 特性坐标系
6.5 重要特性
旋转角度单位：默认0.001度，参数TFR=1时可设为0.00001度

钻孔循环快速移动：参数D3R控制快速/切削进给方式

工件坐标系切换：参数3TW控制是否允许在倾斜面指令中切换

手动干预：可选择是否对手动操作进行坐标变换

7. 纳米平滑加工
7.1 启用指令
nc
G05.1 Q3 X0 Y0 Z0   ; 启用纳米平滑加工
...                 ; 加工指令
G05.1 Q0           ; 取消纳米平滑加工
7.2 功能特点
曲线拟合：将微小线段拟合成平滑曲线进行插补

公差控制：参数19581设定拟合公差

自动取消条件：

程序段长度超过参数8486

程序段长度小于参数8490

程序段间角度超过参数8487

7.3 3程序段平滑判定
启用条件：参数SHP(19592#1)=1

判定原理：基于连续3个程序段的矢量关系判断是否取消平滑

参数配置：

No.8487：角度阈值（默认20.0°）

No.19582：最小移动距离（默认0.5mm）

No.19593：微小程序段角度阈值（默认180.0°）

7.4 使用限制
有效模态：仅特定G代码模态下可用（G15/G40/G49/G50等）

刀具补偿：必须在启用前设置，启用期间不可更改

单段运行：停止点位于插补点而非程序点

程序重启动：必须使用程序段号而非顺序号

8. 其他实用功能
8.1 极坐标指令（G15/G16）
nc
G17 G90 G16        ; 启用极坐标，XY平面，原点为工件零点
G81 X100.0 Y30.0   ; 半径100mm，角度30°
G15                ; 取消极坐标
半径指定：平面的第一轴地址

角度指定：平面的第二轴地址

中心点：G90时为工件零点，G91时为当前位置

8.2 任意角度倒角/拐角R
nc
G01 X100.0, C10.0  ; 直线插补后插入10mm倒角
G01 X100.0, R10.0  ; 直线插补后插入R10圆角
使用限制：

仅适用于G01/G02/G03

下个程序段必须是移动指令

不能用于不同平面间

8.3 分度台分度功能
nc
B45.0 M_          ; 分度到45°位置，M代码控制松开/夹紧
分度单位：参数5512设定的最小分度角度的整数倍

旋转方向：正值为逆时针，负值为顺时针

进给速度：始终为快速移动

8.4 单向定位（G60）
作用：消除反向间隙，提高定位精度

越程量：参数5440设定

定位方向：参数5440设定

模态选项：参数MDL=1时G60可为模态代码

9. 参数管理要点
9.1 关键参数类别
参数类型	作用	示例
基本参数	设定单位、轴配置等	1000系列
伺服参数	伺服电机控制参数	2000系列
坐标系参数	工件坐标系、参考点等	1200系列
固定循环参数	钻孔循环相关设定	5100系列
倾斜面分度参数	五轴加工相关设定	19600系列
9.2 参数备份策略
全参数备份：首次调试完成后

增量备份：每次重要修改后

定期备份：每月或每季度

故障前备份：出现异常时立即备份

9.3 电池维护
电池类型	报警显示	更换期限	数据风险
存储器备份电池	BAT报警	报警后1周内	程序/参数/偏置丢失
绝对编码器电池	APB报警	报警后1周内	绝对位置丢失
10. 故障诊断速查
10.1 常见报警处理
报警号	含义	可能原因	处理措施
PS0010	G代码非法	未支持G代码或选项未安装	检查程序/参数
PS0011	进给速度超限	F值超过参数设定	调整F值或参数
PS0051	倒角/圆角指令错误	下个程序段非移动指令	修改程序顺序
PS0200	刚性攻丝转速超限	S值超过齿轮最大转速	调整S值
PS0340	纳米平滑手动干预错误	手动绝对ON时手动干预	检查手动干预方式
PS5457	G68.2格式非法	欧拉角全为零且参数ATW=0	检查I/J/K值
10.2 操作异常排查
现象	可能原因	检查步骤
位置偏差	补偿未生效/参数错误	1. 检查补偿指令 2. 确认偏置值 3. 验证参数
加工形状错误	平面选择错误/坐标错误	1. 确认G17/G18/G19 2. 检查坐标系设定
固定循环异常	模态数据错误/轴未取消	1. 检查G80取消 2. 确认模态数据
五轴运动异常	旋转轴参数错误/超限	1. 检查旋转轴配置 2. 确认动作范围
附录：编程模板示例
A.1 钻孔加工模板
nc
O1001 (钻孔程序示例)
G90 G94 G40 G80 G17 G49   ; 安全初始化
G91 G28 Z0                ; Z轴回参考点
T01 M06                   ; 换刀1
G90 G54                   ; 选择工件坐标系
G00 X0 Y0                 ; 快速定位
G43 Z50.0 H01             ; 刀具长度补偿
M03 S1500                 ; 主轴正转
G99 G81 X50.0 Y50.0 Z-20.0 R5.0 F100 ; 钻孔1
X100.0                    ; 钻孔2
Y100.0                    ; 钻孔3
X50.0                     ; 钻孔4
G80                       ; 取消固定循环
G91 G28 Z0                ; Z轴回参考点
M30                       ; 程序结束
%
A.2 五轴倾斜面加工模板
nc
O2001 (五轴倾斜面加工)
G90 G94 G40 G80 G17 G49   ; 安全初始化
G91 G28 Z0                ; Z轴回参考点
T02 M06                   ; 换刀2
G90 G55                   ; 选择工件坐标系
G00 X0 Y0                 ; 快速定位
G43 Z100.0 H02            ; 刀具长度补偿
M03 S2000                 ; 主轴正转

; 设定倾斜面坐标系
G68.2 X100.0 Y100.0 Z0 I30.0 J15.0 K0
G53.1                     ; 刀具轴方向控制

; 在特性坐标系中编程
G00 X0 Y0 Z30.0
G01 Z0 F500
... (加工轮廓)
G00 Z50.0

G69                       ; 取消倾斜面分度
G91 G28 Z0                ; Z轴回参考点
M30                       ; 程序结束
%
A.3 刚性攻丝模板
nc
O3001 (刚性攻丝示例)
G90 G94 G40 G80 G17 G49   ; 安全初始化
G91 G28 Z0                ; Z轴回参考点
T03 M06                   ; 换丝锥
G90 G56                   ; 选择工件坐标系
G00 X0 Y0                 ; 快速定位
G43 Z50.0 H03             ; 刀具长度补偿
M29 S500                  ; 刚性攻丝模式
G99 G84 X50.0 Y50.0 Z-25.0 R5.0 F250 ; 攻丝
G80                       ; 取消固定循环
G91 G28 Z0                ; Z轴回参考点
M30                       ; 程序结束
%
文档说明：

本知识库基于FANUC官方说明书整理，具体操作请以机床实际配置为准

参数编号可能因系统版本略有差异，请参考对应版本说明书

安全规范必须严格遵守，任何不确定操作前请咨询专业人员

编程时务必进行试运行验证，确认无误后再进行实际加工

文件保存为：FANUC_OiMD_编程核心知识点.md